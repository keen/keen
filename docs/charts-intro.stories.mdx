import { Meta, Story } from "@storybook/addon-docs/blocks";

<Meta title="Docs/Charts" />

# Charts

The `@keen.io/charts` is set of reusable plots components built with [React](https://reactjs.org/) and [D3](https://d3js.org/).
Charts are part of a `@keen.io/widgets` and `@keen.io/dataviz` packages that could be used to seamlessly embed and deliver metrics within your user interface.

Charts plots theme could be fully customized by providing `theme` object. Each of chart plot supports a lot of configuration options to adjust it to Your own needs.

### Use cases
- [React](https://reactjs.org/) ecosystem front-end applications.
- Create own visualization library by using production ready `@keen.io/charts` and Your custom `React` components.
- Simple data visualizations that do not require additional features like *legend*, *filters* etc.

## Installing

Use standard `npm` or [yarn](https://yarnpkg.com/lang/en/) package manager.

```sh
yarn add @keen.io/charts
```

## Example
Simple `<BarChart />` component rendered in `React` ecosystem.

<Story id="visualizations-bar-chart-plot--plot" />

```js
import { BarChart } from '@keen.io/charts';

const chartData = [
  { name: 'Windows', users: 3, licenses: 52, shops: 12 },
  { name: 'MacOS', users: 19, licenses: 82, shops: 15 },
  { name: 'Linux', users: 20, licenses: 15, shops: 23 },
  { name: 'Android', users: 3, licenses: 15, shops: 30 },
];

<BarChart data={chartData} labelSelector="name" keys={['users', 'licenses', 'shops']} />
```

## Label formatter


To format the label you can use any string with the value output marked with `${}`.

#### - Number:

To additionally process the numeric value use the following parameters separated by semicolon:

```sh
    ${number; pattern; operationType; operationValue}
```

Available patterns for `number` type:

| Number     	| Pattern       | Output
|------------	|--------------	|---------------
| 10000      	| '0,0.0000'   	| 10,000.0000
| 10000.23   	| '0,0'        	| 10,000
| 10000.23   	| '+0,0'       	| +10,000
| -10000     	| '0,0.0'      	| -10,000.0
| 10000.1234 	| '0.000'      	| 10000.123
| 100.1234   	| '00000'      	| 00100
| 1000.1234  	| '000000,0'   	| 001,000
| 10         	| '000.00'     	| 010.00
| 10000.1234 	| '0[.]00000'  	| 10000.12340
| -10000     	| '(0,0.0000)' 	| (10,000.0000)
| -0.23      	| '.00'        	| -.23
| -0.23      	| '(.00)'      	| (.23)
| 0.23       	| '0.00000'    	| 0.23000
| 0.23       	| '0.0[0000]'  	| 0.23
| 1230974    	| '0.0a'       	| 1.2m
| 1460       	| '0 a'        	| 1 k
| -104000    	| '0a'         	| -104k
| 1          	| '0o'         	| 1st
| 100        	| '0o'         	| 100th

Available mathematical operations for `number` type:
- add
- subtract
- multiply
- divide


##### Example:
Input value: `10`

Format string: `${number; 0.00; multiply; 100}£`

Output value: `1000.00£`

#### - Datetime:

To additionally process the datetime value use the following parameters separated by semicolon:

```sh
    ${datetime;dateFormatter;timeFormatter}
```

- Available formats for `datetime` type:

| Format 	|      Output      	|                                  Description                                  	|
|:------:	|:----------------:	|:-----------------------------------------------------------------------------:	|
| YY     	| 18               	| Two-digit year                                                                	|
| YYYY   	| 2018             	| Four-digit year                                                               	|
| M      	| 1-12             	| The month, beginning at 1                                                     	|
| MM     	| 01-12            	| The month, 2-digits                                                           	|
| MMM    	| Jan-Dec          	| The abbreviated month name                                                    	|
| MMMM   	| January-December 	| The full month name                                                           	|
| D      	| 1-31             	| The day of the month                                                          	|
| DD     	| 01-31            	| The day of the month, 2-digits                                                	|
| d      	| 0-6              	| The day of the week, with Sunday as 0                                         	|
| dd     	| Su-Sa            	| The min name of the day of the week                                           	|
| ddd    	| Sun-Sat          	| The short name of the day of the week                                         	|
| dddd   	| Sunday-Saturday  	| The name of the day of the week                                               	|
| H      	| 0-23             	| The hour                                                                      	|
| HH     	| 00-23            	| The hour, 2-digits                                                            	|
| h      	| 1-12             	| The hour, 12-hour clock                                                       	|
| hh     	| 01-12            	| The hour, 12-hour clock, 2-digits                                             	|
| m      	| 0-59             	| The minute                                                                    	|
| mm     	| 00-59            	| The minute, 2-digits                                                          	|
| s      	| 0-59             	| The second                                                                    	|
| ss     	| 00-59            	| The second, 2-digits                                                          	|
| SSS    	| 000-999          	| The millisecond, 3-digits                                                     	|
| Z      	| +05:00           	| The offset from UTC, ±HH:mm                                                   	|
| ZZ     	| +0500            	| The offset from UTC, ±HHmm                                                    	|
| A      	| AM PM            	|                                                                               	|
| a      	| am pm            	|                                                                               	|

##### Example 1:
Input value: `2021-07-17T00:00:00.000Z`

Format string: `${datetime;YYYY-MM-DD; hh:mm}`

Output value: `"2021-17-07 12:00"`

##### Example 2:

Input value: `2021-07-17T00:00:00.000Z`

Format string: `${datetime;hidden;hh:mm}`

Output value: `12:00`

## Compatibility

- `react@^16`
- `react-dom@^16`
